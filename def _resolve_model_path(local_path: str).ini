def _resolve_model_path(local_path: str) -> str:
    from pathlib import Path
    if not local_path:
        raise NotFoundError("DB에 model_path가 비어 있습니다.")
    if os.path.isabs(local_path):
        abs_path = local_path
    else:
        project_root = Path(__file__).resolve().parents[2]
        base = Path((config.get("models") or {}).get("root") or (project_root / "storage" / "model"))

        # 1) 프로젝트 루트 기준 상대경로가 실제 디렉터리면 그걸 사용
        cand = (project_root / local_path.lstrip("./")).resolve()
        if cand.is_dir():
            abs_path = str(cand)
        else:
            # 2) 'storage/model/' 포함 → 뒤쪽만 떼서 base에 결합
            name = os.path.basename(local_path.rstrip("/"))
            if "storage/model/" in local_path:
                suffix = local_path.split("storage/model/", 1)[1]
                cand2 = (base / suffix).resolve()
                if cand2.is_dir():
                    abs_path = str(cand2)
                else:
                    abs_path = str((base / name).resolve())
            else:
                # 3) 폴더명만 취해 base에 결합
                abs_path = str((base / name).resolve())

    if not os.path.isdir(abs_path):
        raise NotFoundError(f"모델 경로를 찾을 수 없음: {abs_path}")
    return abs_path